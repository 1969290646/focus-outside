!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.FocusOutside={})}(this,function(e){"use strict";var t=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,u=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,u=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw u}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=[],i=new function(){var e=[];function t(t){for(var n=0;n<e.length;n++)if(e[n][0]===t)return{index:n,value:e[n][1],key:t}}return{get:function(e){var n=t(e);return n&&n.value},set:function(n,i){var r=t(n);return r?e[r.index][1]=i:(e.push([n,i]),this.size++),this},has:function(e){return!!t(e)},size:0,clear:function(){e=[],this.size=0},values:function(){return e.map(function(e){return e[1]})},entries:function(){return e},delete:function(n){var i=t(n);return!!i&&(e.splice(i.index,1),this.size--,!0)}}};function r(e){return n.find(function(t){return t.contains(e)||t===e})}function u(e){var t=r(e.target);if(t){var n=a(i.entries(),t)||{},u=n.item,o=n.nodeList;u&&clearTimeout(o.timerId)}}function o(e){var t=e.target,n=r(t);if(n){var u=a(i.entries(),n)||{},o=u.item,s=u.nodeList;o&&(s.timerId=setTimeout(function(){return o.callback(t)},10))}}function a(e,n){for(var i=0;i<e.length;i++){var r=t(e[i],2),u=r[0],o=r[1],a=o.find(function(e){return e.node===n});if(a)return{key:u,item:a,nodeList:o}}}e.bind=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"focus-outside";r||(r=t),t.defaultClass=a,n.indexOf(e)<0&&n.push(e),i.has(r)?i.get(r).push({node:e,callback:t,oldTabIndex:e.getAttribute("tabindex")}):i.set(r,[{node:e,callback:t,oldTabIndex:e.getAttribute("tabindex")}]),function(e){return isNaN(parseInt(e.getAttribute("tabindex")))}(e)&&function(e){e.setAttribute("tabindex",-1)}(e),function(e,t){var n=e.className.split(" ");n.indexOf(t)>-1||(n.push(t),e.className=n.join(" "))}(e,a),e.addEventListener("focusin",u),e.addEventListener("focusout",o)},e.unbind=function(e){var t=a(i.entries(),e)||{},r=t.item,s=t.key,f=t.nodeList;if(r){var c=r.node,d=r.callback,l=r.oldTabIndex,v=n.indexOf(c);v>-1&&n.splice(v,1),function(e,t){var n=e.className.split(" "),i=n.indexOf(t);i<0||(n.splice(i,1),e.className=n.join(" "))}(c,d.defaultClass),l?c.setAttribute("tabindex",l):c.removeAttribute("tabindex"),c.removeEventListener("focusin",u),c.removeEventListener("focusout",o);var b=f.indexOf(r);v>-1&&f.splice(b,1),f.length||i.delete(s)}},Object.defineProperty(e,"__esModule",{value:!0})});
